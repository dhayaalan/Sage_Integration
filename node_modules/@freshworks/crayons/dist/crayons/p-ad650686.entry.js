import{r as t,c as s,h as i,i as o}from"./p-16e19467.js";import{p as e}from"./p-0fff84d6.js";import{c as h}from"./p-d4599615.js";const n=class{constructor(i){t(this,i),this.fwShow=s(this,"fwShow",7),this.fwHide=s(this,"fwHide",7),this.triggerRefSlot=null,this.isOpen=!1,this.placement="bottom",this.fallbackPlacements=["top"],this.skidding="0",this.distance="0",this.variant="select",this.sameWidth=!0,this.trigger="click",this.hasBorder=!0,this.hoist=!1,this.disableTransition=!1,this.autoFocusOnContent=!1,this.hideOnTab=!0,this.showAfter=0,this.hideAfter=0,this.componentDidRender=()=>{this.resizeObserver=new ResizeObserver(this.updatePopper.bind(this)),this.resizeObserver.observe(this.popperDiv)},this.removeResizeObserver=()=>{this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}}onKeyDown(t){switch(t.key){case"Tab":this.hideOnTab&&this.hide();break;case"Escape":this.hide()}}async show(){var t,s,i;this.isOpen||(clearTimeout(this.timerId),this.showAfter>0&&await this.delay(this.showAfter),this.sameWidth&&(this.popperDiv.style.width=String(this.triggerRef.getBoundingClientRect().width)+"px"),!this.popperInstance&&this.createPopperInstance(),this.popperDiv.setAttribute("data-show",""),this.popperInstance.setOptions((t=>Object.assign(Object.assign({},t),{modifiers:[...t.modifiers,{name:"eventListeners",enabled:!0}]}))),this.popperInstance.update(),"hover"!==this.trigger&&(this.overlay.style.display="block"),this.isOpen=!this.isOpen,"FW-LIST-OPTIONS"===(null===(t=this.contentRef)||void 0===t?void 0:t.tagName)&&this.contentRef.scrollToLastSelected(),this.autoFocusOnContent&&(this.contentRef.setFocus?this.contentRef.setFocus():null===(i=(s=this.contentRef).focus)||void 0===i||i.call(s)),this.fwShow.emit())}async hide(){var t,s,i;this.isOpen&&(clearTimeout(this.timerId),this.hideAfter>0&&await this.delay(this.hideAfter),this.popperDiv.removeAttribute("data-show"),this.popperInstance.setOptions((t=>Object.assign(Object.assign({},t),{modifiers:[...t.modifiers,{name:"eventListeners",enabled:!1}]}))),"hover"!==this.trigger&&(this.overlay.style.display="none"),this.isOpen=!this.isOpen,"FW-LIST-OPTIONS"===(null===(t=this.contentRef)||void 0===t?void 0:t.tagName)&&this.contentRef.clearFilter(),this.autoFocusOnContent&&(this.triggerRef.setFocus?this.triggerRef.setFocus():null===(i=(s=this.triggerRef).focus)||void 0===i||i.call(s)),this.fwHide.emit())}componentWillLoad(){if(this.contentRef=this.host.querySelector('[slot="popover-content"]'),this.triggerRef=this.host.querySelector('[slot="popover-trigger"]'),"SLOT"===this.triggerRef.nodeName){const t=this.triggerRef.assignedElements();t.length&&(this.triggerRefSlot=t[0])}if("click"===this.trigger)this.triggerRef.addEventListener(this.trigger,(()=>{this.isOpen?this.hide():this.show()}));else if("hover"===this.trigger){const t=this.triggerRefSlot||this.triggerRef;t.addEventListener("focus",this.show.bind(this)),t.addEventListener("blur",this.hide.bind(this)),t.addEventListener("mouseenter",this.show.bind(this)),this.host.addEventListener("mouseleave",(t=>{const s=(t.path?t.path:t.composedPath()).filter((t=>"FW-TOOLTIP"===t.nodeName))[0];if(s){const t=(()=>{const t=document.querySelectorAll(":hover");[].indexOf.call(t,s)<0&&this.hide()}).bind(this);setTimeout(t,200)}else this.hide()}))}this.popperOptions={placement:this.placement,strategy:this.hoist?"fixed":"absolute",modifiers:[{name:"flip",options:{fallbackPlacements:this.fallbackPlacements}},{name:"preventOverflow",options:{boundary:this.boundary||"clippingParents"}},{name:"offset",options:{offset:[Number(this.skidding),Number(this.distance)]}},e]}}async delay(t){return new Promise((s=>{this.timerId=setTimeout(s,t)}))}updatePopper(){var t;this.isOpen&&(!this.popperInstance&&this.createPopperInstance(),null===(t=this.popperInstance)||void 0===t||t.update())}disconnectedCallback(){var t;this.removeResizeObserver(),null===(t=this.popperInstance)||void 0===t||t.destroy(),clearTimeout(this.timerId)}createPopperInstance(){this.popperInstance=h(this.triggerRefSlot||this.triggerRef,this.popperDiv,this.popperOptions)}render(){return[i("slot",{name:"popover-trigger"}),i("div",{class:{"popper-content":!0,"no-border":!this.hasBorder,"no-transition":this.disableTransition},ref:t=>this.popperDiv=t},i("slot",{name:"popover-content"})),"hover"!==this.trigger&&i("div",{"aria-hidden":"true",class:"overlay",ref:t=>this.overlay=t,onClick:()=>this.hide()})]}get host(){return o(this)}};n.style=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}.popper-content{display:none;z-index:99;min-width:var(--fw-popover-min-width);max-width:var(--fw-popover-max-width);min-height:var(--fw-popover-min-height, 10px);max-height:var(--fw-popover-max-height, 400px);overflow-y:auto;overflow-x:hidden;overscroll-behavior-y:contain;margin:0px;border-radius:var(--fw-popover-border-radius, 8px);border:1px solid #ebeff3;position:absolute;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transform:scale(0.01);transform:scale(0.01);-webkit-transition:150ms color, 150ms border, 150ms -webkit-box-shadow;transition:150ms color, 150ms border, 150ms -webkit-box-shadow;transition:150ms color, 150ms border, 150ms box-shadow;transition:150ms color, 150ms border, 150ms box-shadow, 150ms -webkit-box-shadow;will-change:auto}:host(:not([dir="rtl"])) .popper-content,:host([dir="ltr"]) .popper-content{-webkit-box-shadow:-15px 20px 40px rgba(0, 0, 0, 0.04);box-shadow:-15px 20px 40px rgba(0, 0, 0, 0.04)}:host([dir="rtl"]) .popper-content{-webkit-box-shadow:15px 20px 40px rgba(0, 0, 0, 0.04);box-shadow:15px 20px 40px rgba(0, 0, 0, 0.04)}.popper-content.no-border{border:0px}.popper-content.no-transition{-webkit-transition:none;transition:none}.popper-content[data-show]{display:block}.overlay{width:100%;height:100%;display:none;position:fixed;inset-block-start:0;inset-inline-start:0;z-index:95;background-color:transparent}@media screen and (prefers-reduced-motion: reduce){.popper-content{-webkit-transition:none;transition:none}}';export{n as fw_popover}